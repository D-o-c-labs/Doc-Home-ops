{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  extends: [
    "github>bjw-s/renovate-config",
    "github>bjw-s/renovate-config:automerge-github-actions",
    "github>D-o-c-labs/Doc-Home-ops//.renovate/allowedVersions.json5",
    "github>D-o-c-labs/Doc-Home-ops//.renovate/autoMerge.json5",
    "github>D-o-c-labs/Doc-home-ops//.renovate/versioning.json5",
    "github>D-o-c-labs/Doc-Home-ops//.renovate/groups.json5",
    "github>bjw-s-labs/home-ops//.renovate/grafanaDashboards.json5",
    "config:recommended",
    ":dependencyDashboard",
  ],
  ignorePaths: [".archive/**"],
  flux: {
    managerFilePatterns: ["/^kubernetes/.+\\.ya?ml$/"],
  },
  "helm-values": {
    managerFilePatterns: ["/^kubernetes/.+\\.ya?ml$/"],
  },
  kubernetes: {
    managerFilePatterns: ["/^kubernetes/.+\\.ya?ml$/"],
  },
  customManagers: [
    {
      customType: "regex",
      description: "Update Talos/Kubernetes versions in system-upgrade Kustomization",
      managerFilePatterns: [
        "/(^|/)kubernetes/apps/system-upgrade/system-upgrade-controller/ks\\.ya?ml$/",
      ],
      matchStrings: [
        "# renovate: depName=(?<depName>\\S+) datasource=docker\\n(?<indentation>\\s+)(?<varName>TALOS_VERSION|KUBERNETES_VERSION): (?<currentValue>\\S+)",
      ],
      autoReplaceStringTemplate: "# renovate: depName={{{depName}}} datasource=docker\n{{{indentation}}}{{{varName}}}: {{{newValue}}}",
      datasourceTemplate: "docker",
    },
  ],
}
